#include <IRremote.h>
#include <MideaIR.h>

#define IR_EMITER       3
#define THREE_SECONDS    3000

// IRsend Object and Remote Control object
IRsend irsend;
MideaIR remote_control(&irsend);
int onled = 13; //GREEN led on AC-ON
int offled = 12; //RED led on AC-OFF

void setup(){
  Serial.begin(115200);
  // Define IR PIN as Output
  pinMode(IR_EMITER, OUTPUT);
  pinMode(onled, OUTPUT);
  pinMode(offled, OUTPUT);

}

void loop(){
  if (Serial.available()) {
    String ser = Serial.readString();

    // AC-ON of AC-OFF commands
    if (ser == "AC-ON") {
        remote_control.setState(true);
        remote_control.turnON();
        digitalWrite(onled, HIGH);
        delay(THREE_SECONDS);
        Serial.print("ac-is-on");
        digitalWrite(onled, LOW);
    } else if (ser == "AC-OFF") {
        remote_control.setState(true);
        remote_control.turnOFF();
        digitalWrite(offled, HIGH);
        delay(THREE_SECONDS);
        Serial.print("ac-is-off");
        digitalWrite(offled, LOW);
     } else if (ser == "COOL") {
        remote_control.setState(true);
        remote_control.setTemperature(23);
        remote_control.setMode(mode_cool);
        remote_control.setSpeedFan(fan_speed_3);
        remote_control.emit();
        delay(THREE_SECONDS);
        Serial.print("cool");
     } else if (ser == "HEAT") {
        remote_control.setState(true);
        remote_control.setTemperature(26);
        remote_control.setMode(mode_auto);
        remote_control.emit();
        delay(THREE_SECONDS);
        Serial.print("heat");
    }
  }
}